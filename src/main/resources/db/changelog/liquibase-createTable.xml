<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd">
    <changeSet author="S Timur" id="1">
        <createTable tableName="authors">
            <column autoIncrement="true" name="id" type="SERIAL">
                <constraints primaryKey="true" primaryKeyName="authors_pkey"/>
            </column>
            <column name="description" type="TEXT"/>
            <column name="name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="photo" type="VARCHAR(255)"/>
            <column name="slug" type="VARCHAR(255)">
                <constraints nullable="false" unique="true"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="S Timur" id="2">
        <createTable tableName="balance_transaction">
            <column autoIncrement="true" name="id" type="SERIAL">
                <constraints primaryKey="true" primaryKeyName="balance_transaction_pkey"/>
            </column>
            <column name="description" type="TEXT">
                <constraints nullable="false"/>
            </column>
            <column name="time" type="TIMESTAMP(0) WITHOUT TIME ZONE" defaultValueDate="now()">
                <constraints nullable="false"/>
            </column>
            <column defaultValueNumeric="0" name="value" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="book_id" type="INT"/>
            <column name="user_id" type="INT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="S Timur" id="3">
        <createTable tableName="book2author">
            <column name="author_id" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="book_id" type="INT">
                <constraints nullable="false"/>
            </column>
            <column defaultValueNumeric="0" name="sort_index" type="INT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="S Timur" id="4">
        <createTable tableName="book2genre">
            <column name="book_id" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="genre_id" type="INT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="S Timur" id="5">
        <createTable tableName="book2tag">
            <column name="book_id" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="tag_id" type="INT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="S Timur" id="6">
        <createTable tableName="book2user">
            <column name="book_id" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="user_id" type="bigint">
                <constraints nullable="false"/>
            </column>
            <column name="time" type="timestamp(0)" defaultValueDate="now()">
                <constraints nullable="false"/>
            </column>
            <column name="type_id" type="INT"/>
        </createTable>
    </changeSet>
    <changeSet author="S Timur" id="7">
        <createTable tableName="book2user_type">
            <column autoIncrement="true" name="id" type="SERIAL">
                <constraints primaryKey="true" primaryKeyName="book2user_type_pkey"/>
            </column>
            <column name="code" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="S Timur" id="8">
        <createTable tableName="book_file">
            <column autoIncrement="true" name="id" type="SERIAL">
                <constraints primaryKey="true" primaryKeyName="book_file_pkey"/>
            </column>
            <column name="hash" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="path" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="book_id" type="INT"/>
            <column name="type_id" type="INT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="S Timur" id="9">
        <createTable tableName="book_file_type">
            <column autoIncrement="true" name="id" type="SERIAL">
                <constraints primaryKey="true" primaryKeyName="book_file_type_pkey"/>
            </column>
            <column name="description" type="TEXT"/>
            <column name="name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="S Timur" id="10">
        <createTable tableName="book_rating">
            <column name="rating" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="book_id" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="user_id" type="INT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="S Timur" id="11">
        <createTable tableName="book_review">
            <column autoIncrement="true" name="id" type="SERIAL">
                <constraints primaryKey="true" primaryKeyName="book_review_pkey"/>
            </column>
            <column name="text" type="TEXT">
                <constraints nullable="false"/>
            </column>
            <column name="time" type="datetime" defaultValueDate="now()">
                <constraints nullable="false"/>
            </column>
            <column name="book_id" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="user_id" type="INT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="S Timur" id="12">
        <createTable tableName="book_review_like">
            <column name="time" type="timestamp(0)" defaultValueDate="now()">
                <constraints nullable="false"/>
            </column>
            <column name="value" type="SMALLINT">
                <constraints nullable="false"/>
            </column>
            <column name="review_id" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="user_id" type="INT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="S Timur" id="13">
        <createTable tableName="books">
            <column autoIncrement="true" name="id" type="SERIAL">
                <constraints primaryKey="true" primaryKeyName="books_pkey"/>
            </column>
            <column name="description" type="TEXT"/>
            <column defaultValueNumeric="0.0" name="discount" type="FLOAT8">
                <constraints nullable="false"/>
            </column>
            <column name="image" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="is_bestseller" type="SMALLINT">
                <constraints nullable="false"/>
            </column>
            <column defaultValueNumeric="0.0" name="popularity" type="FLOAT8">
                <constraints nullable="false"/>
            </column>
            <column name="price" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="pub_date" type="date">
                <constraints nullable="false"/>
            </column>
            <column name="slug" type="VARCHAR(36)">
                <constraints nullable="false"/>
            </column>
            <column name="title" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="S Timur" id="14">
        <createTable tableName="document">
            <column autoIncrement="true" name="id" type="SERIAL">
                <constraints primaryKey="true" primaryKeyName="document_pkey"/>
            </column>
            <column name="slug" type="VARCHAR(32)">
                <constraints nullable="false"/>
            </column>
            <column defaultValueNumeric="0" name="sort_index" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="html_text" type="TEXT">
                <constraints nullable="false"/>
            </column>
            <column name="title" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="description" type="TEXT">
                <constraints nullable="false"/>
            </column>
            <column name="image" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="S Timur" id="15">
        <createTable tableName="faq">
            <column autoIncrement="true" name="id" type="SERIAL">
                <constraints primaryKey="true" primaryKeyName="faq_pkey"/>
            </column>
            <column name="answer" type="TEXT">
                <constraints nullable="false"/>
            </column>
            <column name="question" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column defaultValueNumeric="0" name="sort_index" type="INT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="S Timur" id="16">
        <createTable tableName="file_download">
            <column defaultValueNumeric="0" name="count" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="book_id" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="user_id" type="INT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="S Timur" id="17">
        <createTable tableName="genre">
            <column autoIncrement="true" name="id" type="SERIAL">
                <constraints primaryKey="true" primaryKeyName="genre_pkey"/>
            </column>
            <column name="name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="slug" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="parent_id" type="INT"/>
        </createTable>
    </changeSet>
    <changeSet author="S Timur" id="18">
        <createTable tableName="message">
            <column autoIncrement="true" name="id" type="SERIAL">
                <constraints primaryKey="true" primaryKeyName="message_pkey"/>
            </column>
            <column name="email" type="VARCHAR(255)"/>
            <column name="name" type="VARCHAR(255)"/>
            <column name="subject" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="text" type="TEXT">
                <constraints nullable="false"/>
            </column>
            <column name="time" type="timestamp(0)" defaultValueDate="now()">
                <constraints nullable="false"/>
            </column>
            <column name="user_id" type="INT"/>
        </createTable>
    </changeSet>
    <changeSet author="S Timur" id="19">
        <createTable tableName="tags">
            <column autoIncrement="true" name="id" type="SERIAL">
                <constraints primaryKey="true" primaryKeyName="tags_pkey"/>
            </column>
            <column name="name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="slug" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="S Timur" id="20">
        <createTable tableName="user_contact">
            <column autoIncrement="true" name="id" type="SERIAL">
                <constraints primaryKey="true" primaryKeyName="user_contact_pkey"/>
            </column>
            <column defaultValueNumeric="0" name="approved" type="SMALLINT">
                <constraints nullable="false"/>
            </column>
            <column name="code" type="VARCHAR(255)"/>
            <column name="code_time" type="TIMESTAMP(0) WITHOUT TIME ZONE" defaultValueDate="now()"/>
            <column defaultValueNumeric="0" name="code_trails" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="contact" type="VARCHAR(255)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="type" type="VARCHAR(255)"/>
            <column name="user_id" type="INT"/>
        </createTable>
    </changeSet>
    <changeSet author="S Timur" id="21">
        <createTable tableName="users">
            <column autoIncrement="true" name="id" type="SERIAL">
                <constraints primaryKey="true" primaryKeyName="users_pkey" deleteCascade="true"/>
            </column>
            <column defaultValueNumeric="0" name="balance" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="hash" type="VARCHAR(32)">
                <constraints nullable="false" unique="true"/>
            </column>
            <column name="firstname" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="lastname" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="password" type="VARCHAR(255)"/>
            <column name="reg_time" type="TIMESTAMP(0) WITHOUT TIME ZONE" defaultValueDate="now()">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="S Timur" id="22">
        <addPrimaryKey columnNames="author_id, book_id" constraintName="book2author_pkey" tableName="book2author"/>
    </changeSet>
    <changeSet author="S Timur" id="23">
        <addPrimaryKey columnNames="book_id, genre_id" constraintName="book2genre_pkey" tableName="book2genre"/>
    </changeSet>
    <changeSet author="S Timur" id="24">
        <addPrimaryKey columnNames="book_id, tag_id" constraintName="book2tag_pkey" tableName="book2tag"/>
    </changeSet>
    <changeSet author="S Timur" id="25">
        <addPrimaryKey columnNames="book_id, user_id" constraintName="book2user_pkey" tableName="book2user"/>
    </changeSet>
    <changeSet author="S Timur" id="26">
        <addForeignKeyConstraint baseColumnNames="parent_id" baseTableName="genre"
                                 constraintName="fk19g7t6b636h69dufjf98ofc0x" deferrable="false"
                                 initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION"
                                 referencedColumnNames="id" referencedTableName="genre"/>
    </changeSet>
    <changeSet author="S Timur" id="27">
        <addForeignKeyConstraint baseColumnNames="user_id" baseTableName="book2user"
                                 constraintName="fk1i8i82uo8kbv1wepiujenmj7x" deferrable="false"
                                 initiallyDeferred="false" onDelete="CASCADE" onUpdate="NO ACTION"
                                 referencedColumnNames="id" referencedTableName="users"/>
    </changeSet>
    <changeSet author="S Timur" id="28">
        <addForeignKeyConstraint baseColumnNames="author_id" baseTableName="book2author"
                                 constraintName="fk3hyom3yo5q6nfo9ytqofqil37" deferrable="false"
                                 initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION"
                                 referencedColumnNames="id" referencedTableName="authors"/>
    </changeSet>
    <changeSet author="S Timur" id="29">
        <addForeignKeyConstraint baseColumnNames="book_id" baseTableName="book2author"
                                 constraintName="fk8joa8tens71ol1st4fd9hssph" deferrable="false"
                                 initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION"
                                 referencedColumnNames="id" referencedTableName="books"/>
    </changeSet>
    <changeSet author="S Timur" id="30">
        <addForeignKeyConstraint baseColumnNames="type_id" baseTableName="book_file"
                                 constraintName="fkab7ynoex2ahy28trbmkk9uxu4" deferrable="false"
                                 initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION"
                                 referencedColumnNames="id" referencedTableName="book_file_type"/>
    </changeSet>
    <changeSet author="S Timur" id="32">
        <addForeignKeyConstraint baseColumnNames="tag_id" baseTableName="book2tag"
                                 constraintName="fkbha16g6maqt9emet4pt8qq9" deferrable="false" initiallyDeferred="false"
                                 onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id"
                                 referencedTableName="tags"/>
    </changeSet>
    <changeSet author="S Timur" id="33">
        <addForeignKeyConstraint baseColumnNames="book_id" baseTableName="book2genre"
                                 constraintName="fkceqa97sssb6d5xg7n8jtt5gqb" deferrable="false"
                                 initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION"
                                 referencedColumnNames="id" referencedTableName="books"/>
    </changeSet>
    <changeSet author="S Timur" id="34">
        <addForeignKeyConstraint baseColumnNames="book_id" baseTableName="book2user"
                                 constraintName="fkd80i5quc7o0xb1d1k8ppqmtsu" deferrable="false"
                                 initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION"
                                 referencedColumnNames="id" referencedTableName="books"/>
    </changeSet>
    <changeSet author="S Timur" id="35">
        <addForeignKeyConstraint baseColumnNames="book_id" baseTableName="balance_transaction"
                                 constraintName="fke2aw1i7lhjey4rskq9qhed9qs" deferrable="false"
                                 initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION"
                                 referencedColumnNames="id" referencedTableName="books"/>
    </changeSet>
    <changeSet author="S Timur" id="37">
        <addForeignKeyConstraint baseColumnNames="book_id" baseTableName="book_rating"
                                 constraintName="fkg6p9bhsx856y3gj39utdc7udf" deferrable="false"
                                 initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION"
                                 referencedColumnNames="id" referencedTableName="books"/>
        <addForeignKeyConstraint baseColumnNames="user_id" baseTableName="book_rating"
                                 constraintName="fvz6p9bbxx856y3gj39utdc4udf" deferrable="false"
                                 initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION"
                                 referencedColumnNames="id" referencedTableName="users"/>
    </changeSet>
    <changeSet author="S Timur" id="38">
        <addForeignKeyConstraint baseColumnNames="book_id" baseTableName="book_file"
                                 constraintName="fkg7meofferi2glg6uwj2yhfmp9" deferrable="false"
                                 initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION"
                                 referencedColumnNames="id" referencedTableName="books"/>
    </changeSet>
    <changeSet author="S Timur" id="39">
        <addForeignKeyConstraint baseColumnNames="book_id" baseTableName="book_review"
                                 constraintName="fkgme5o68sylsmw5hw0ys2x8iw8" deferrable="false"
                                 initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION"
                                 referencedColumnNames="id" referencedTableName="books"/>
    </changeSet>
    <changeSet author="S Timur" id="40">
        <addForeignKeyConstraint baseColumnNames="type_id" baseTableName="book2user"
                                 constraintName="fkgshsph8qmeq54ntxrfcodb94" deferrable="false"
                                 initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION"
                                 referencedColumnNames="id" referencedTableName="book2user_type"/>
    </changeSet>
    <changeSet author="S Timur" id="41">
        <addForeignKeyConstraint baseColumnNames="user_id" baseTableName="user_contact"
                                 constraintName="fkigqfory4r46pqd0sl4csnwp72" deferrable="false"
                                 initiallyDeferred="false" onDelete="SET NULL" onUpdate="NO ACTION"
                                 referencedColumnNames="id" referencedTableName="users"/>
    </changeSet>
    <changeSet author="S Timur" id="42">
        <addForeignKeyConstraint baseColumnNames="genre_id" baseTableName="book2genre"
                                 constraintName="fkkdc8kcprnkl4ygg2f0v9588wi" deferrable="false"
                                 initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION"
                                 referencedColumnNames="id" referencedTableName="genre"/>
    </changeSet>
    <changeSet author="S Timur" id="43">
        <addForeignKeyConstraint baseColumnNames="book_id" baseTableName="book2tag"
                                 constraintName="fkkshb2gce4ettp6ehidjy86u5c" deferrable="false"
                                 initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION"
                                 referencedColumnNames="id" referencedTableName="books"/>
    </changeSet>
    <changeSet author="S Timur" id="44">
        <addPrimaryKey columnNames="review_id, user_id" constraintName="book_review_like_pkey"
                       tableName="book_review_like"/>
    </changeSet>
    <changeSet author="S Timur" id="45">
        <addForeignKeyConstraint baseColumnNames="user_id" baseTableName="balance_transaction"
                                 constraintName="fkndi1dijwreoyd8stngrabtx8m" deferrable="false"
                                 initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION"
                                 referencedColumnNames="id" referencedTableName="users"/>
    </changeSet>
    <changeSet author="S Timur" id="46">
        <addForeignKeyConstraint baseColumnNames="user_id" baseTableName="book_review"
                                 constraintName="fkntncp0b191bex8jkm3vy3l13x" deferrable="false"
                                 initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION"
                                 referencedColumnNames="id" referencedTableName="users"/>
    </changeSet>
    <changeSet author="S Timur" id="47">
        <addForeignKeyConstraint baseColumnNames="user_id" baseTableName="message"
                                 constraintName="fkpdrb79dg3bgym7pydlf9k3p1n" deferrable="false"
                                 initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION"
                                 referencedColumnNames="id" referencedTableName="users"/>
    </changeSet>
    <changeSet author="S Timur" id="48">
        <addPrimaryKey columnNames="user_id, book_id" constraintName="file_download_pkey" tableName="file_download"/>
    </changeSet>
    <changeSet id="49" author="S Timur">
        <insert tableName="authors">
            <column name="photo" value="https://dummyimage.com/476x715.png/5fa2dd/ffffff"/>
            <column name="slug" value="lev_tolstoy"/>
            <column name="name" value="Лев Толстой"/>
        </insert>
        <insert tableName="authors">
            <column name="photo" value="https://dummyimage.com/476x715.png/5fa2dd/ffffff"/>
            <column name="slug" value="fyodor_dostoevskiy"/>
            <column name="name" value="Федор Достаевский"/>
        </insert>
        <insert tableName="authors">
            <column name="photo" value="https://dummyimage.com/476x715.png/5fa2dd/ffffff"/>
            <column name="slug" value="mikhail_bulgakov"/>
            <column name="name" value="Михаил Булгаков"/>
        </insert>
        <insert tableName="authors">
            <column name="photo" value="https://dummyimage.com/476x715.png/5fa2dd/ffffff"/>
            <column name="slug" value="nikolay_vasilevich_gogol"/>
            <column name="name" value="Николай Гоголь"/>
        </insert>
        <insert tableName="authors">
            <column name="photo" value="https://dummyimage.com/476x715.png/5fa2dd/ffffff"/>
            <column name="slug" value="aleksandr_pushkin"/>
            <column name="name" value="Александр Пушкин"/>
        </insert>
        <insert tableName="authors">
            <column name="photo" value="https://dummyimage.com/476x715.png/5fa2dd/ffffff"/>
            <column name="slug" value="ivan_sergeevich_turgenev"/>
            <column name="name" value="Иван Тургенев"/>
        </insert>
        <insert tableName="authors">
            <column name="photo" value="https://dummyimage.com/476x715.png/5fa2dd/ffffff"/>
            <column name="slug" value="anton_pavlovich_chekhov"/>
            <column name="name" value="Антон Чехов"/>
        </insert>
        <insert tableName="authors">
            <column name="photo" value="https://dummyimage.com/476x715.png/5fa2dd/ffffff"/>
            <column name="slug" value="aleksandr_griboedov"/>
            <column name="name" value="Александр Грибоедов"/>
        </insert>
        <insert tableName="authors">
            <column name="photo" value="https://dummyimage.com/476x715.png/5fa2dd/ffffff"/>
            <column name="slug" value="ilya_ilf"/>
            <column name="name" value="Илья Ильф"/>
        </insert>
        <insert tableName="authors">
            <column name="photo" value="https://dummyimage.com/476x715.png/5fa2dd/ffffff"/>
            <column name="slug" value="evgeniy_petrov"/>
            <column name="name" value="Евгений Петров"/>
        </insert>
        <insert tableName="authors">
            <column name="photo" value="https://dummyimage.com/476x715.png/5fa2dd/ffffff"/>
            <column name="slug" value="dzhoan_k_rouling"/>
            <column name="name" value="Джоан Роулинг"/>
        </insert>
        <insert tableName="authors">
            <column name="photo" value="https://dummyimage.com/476x715.png/5fa2dd/ffffff"/>
            <column name="slug" value="dzhon_ronald_ruel_tolkin"/>
            <column name="name" value="Джон Рональд Руэл Толкин"/>
        </insert>
        <insert tableName="authors">
            <column name="photo" value="https://dummyimage.com/476x715.png/5fa2dd/ffffff"/>
            <column name="slug" value="dzhordzh_oruell"/>
            <column name="name" value="Джордж Оруэлл"/>
        </insert>
        <insert tableName="authors">
            <column name="photo" value="https://dummyimage.com/476x715.png/5fa2dd/ffffff"/>
            <column name="slug" value="gregori_devid_roberts"/>
            <column name="name" value="Грегори Дэвид Робертс"/>
        </insert>
        <insert tableName="authors">
            <column name="photo" value="https://dummyimage.com/476x715.png/5fa2dd/ffffff"/>
            <column name="slug" value="erikh_mariya_remark"/>
            <column name="name" value="Эрих Мария Ремарк"/>
        </insert>
        <insert tableName="authors">
            <column name="photo" value="https://dummyimage.com/476x715.png/5fa2dd/ffffff"/>
            <column name="slug" value="deniel_kiz"/>
            <column name="name" value="Дэниел Киз"/>
        </insert>
        <insert tableName="authors">
            <column name="photo" value="https://dummyimage.com/476x715.png/5fa2dd/ffffff"/>
            <column name="slug" value="oskar_uayld"/>
            <column name="name" value="Оскар Уайльд"/>
        </insert>
        <insert tableName="authors">
            <column name="photo" value="https://dummyimage.com/476x715.png/5fa2dd/ffffff"/>
            <column name="slug" value="antuan_de_sent_ekzyuperi"/>
            <column name="name" value="Антуан де Сент-Экзюпери"/>
        </insert>
        <insert tableName="authors">
            <column name="photo" value="https://dummyimage.com/476x715.png/5fa2dd/ffffff"/>
            <column name="slug" value="dzherom_d_selindzher"/>
            <column name="name" value="Джером Д. Сэлинджер"/>
        </insert>
        <insert tableName="authors">
            <column name="photo" value="https://dummyimage.com/476x715.png/5fa2dd/ffffff"/>
            <column name="slug" value="rey_bredberi"/>
            <column name="name" value="Рэй Брэдбери"/>
            <column name="description"
                    value="Рэй Брэдбери — американский писатель. Рэй Дуглас Брэдбери родом из городка Уокиган, штат Иллинойс. Он появился на свет в августе 1920 года. По отцу у автора английские корни, а по матери — шведские. В семье появилось ещё трое детей, однако пережил младенчество лишь его брат Леонард. &#10;&#10;Раннее знакомство со смертью оставило глубокий след в душе Брэдбери, что нашло отражение в его творчестве. В доме любили искусство, особенно новую диковинку века — кинематограф. Великая депрессия привела родителей Брэдбери на заработки в Лос-Анджелес. После школы парень начал зарабатывать, продавая газеты. Семья не могла дать денег сыновьям на колледж, потому Рэй так и не получил высшего образования. Он сам занялся своим просвещением, посещая библиотеки. Так он познакомился с трудами Достоевского, чьё творчество, по мнению американца, сильно на него повлияло. Брэдбери с 12 лет мечтал писать. Тогда он попробовал сочинить продолжение «Великого воина Марса» Берроуза. Через 5 лет юноша стал членом американского сообщества молодых авторов — «Лиги научных фантастов» Лос-Анджелеса. Рэй писал рассказы, выходившие в дешёвых литературных журналах. Зарабатывать только творчеством было тяжело, но он не сдавался. В 1947-ом вышел первый сборник его рассказов «Тёмный карнавал», встреченный, увы, прохладно. В 1949 году молодой человек перебрался из провинции в Нью-Йорк. Он предложил свои произведения двенадцати издательствам, но везде получил отказ. Лишь одно из них заинтересовалось его текстами. Автору выдвинули условие: для публикации его рассказы должны быть объединены в роман. За ночь Рэй набросал концепцию будущего произведения в виде эссе, содержащее первые наброски будущих «Марсианских хроник». После выхода в свет они в корне изменили представление о жанре научной фантастики. Эту работу её создатель считал лучшей у себя. Всемирная известность настигла автора в 1953-ем после публикации романа «451 градус по Фаренгейту». Впервые он вышел частями в журнале Playboy, который только начал набирать популярность. Главный герой романа Гай Монтэг живёт в тоталитарном обществе потребления. Он работает пожарным, чья задача сжигать книги. Гай считает, что дело пожарных правое и нужное. После встречи с загадочной девушкой его взгляды меняются. Роман долгое время издавался с серьёзными поправками из-за жёсткой цензуры издательства. Однако в 1980-ом Брэдбери удалось отвоевать каждый выкинутый кусок своего детища. В будущем текст «451 градус по Фаренгейту» выходил без сокращений. Автора окрестили «мэтром фантастики». Правда, он никогда не ограничивался рамками этого жанра. Так в 1957-ом мир увидел «Вино из одуванчиков» — отчасти биографическую повесть Рэя. В центре сюжета живущие в маленьком городке братья Том и Дуглас Сполдинги (их фамилия — второе имя отца Брэдбери). Дуглас — альтер-эго самого писателя в детстве. Изначально рукопись тянула на полноценный роман, однако издатель потребовал разделить её на две части. «Лето, прощай!», вторая половинка той истории, вышла спустя полвека. Это произведение стало последней прижизненной публикацией Брэдбери. Самое передаваемое произведение фантаста — «И грянул гром», в основе которого лежит «теория хаоса», более известная под названием «эффект бабочки». Он о том, что равновесие в природе хрупко. Сюжет рассказа послужил основой для нескольких фильмов и сериалов. Творческая деятельность Рэя также распространялась на кино и театр. Он писал сценарии, был автором и ведущим нескольких телепередач. Писатель не раз получал награды в области фантастической литературы, в том числе премии «Небьюла» и «Хьюго», Американской академии и Пулитцеровской премии. Со своей единственной супругой Маргарет Маклюр Рэй познакомился в сентябре 1947 года в книжном магазине, где девушка работала продавцом. Первые годы брака она тянула всю семью, ведь Брэдбери не удавалось хорошо заработать творчеством. Он ласково назвал супругу Мэгги и прожил с ней вместе вплоть до её смерти в 2003-ем. Именно Маргаретт автор посвятил «Марсианские хроники». У супругов было четверо дочерей — Сьюзен, Рамона, Александра и Беттина. Жизнь Рэя была полностью посвящена литературе до самых последних дней. Его утро неизменно начиналось за рабочим столом. Фантаст верил, что творчество продлевает ему жизнь. После инсульта в 1999 году Брэдбери уже не вставал с инвалидного кресла. Знаменитый фантаст умер на 91 году жизни 5 июня 2012-го в Лос-Анджелесе."/>
        </insert>
        <insert tableName="authors">
            <column name="photo" value="https://dummyimage.com/476x715.png/5fa2dd/ffffff"/>
            <column name="slug" value="rend_ayn"/>
            <column name="name" value="Рэнд Айн"/>
        </insert>
        <insert tableName="authors">
            <column name="photo" value="https://dummyimage.com/476x715.png/5fa2dd/ffffff"/>
            <column name="slug" value="kharper_li"/>
            <column name="name" value="Харпер Ли"/>
        </insert>
        <insert tableName="authors">
            <column name="photo" value="https://dummyimage.com/476x715.png/5fa2dd/ffffff"/>
            <column name="slug" value="gabriel_garsia_markes"/>
            <column name="name" value="Габриэль Гарсиа Маркес"/>
        </insert>
        <insert tableName="authors">
            <column name="photo" value="https://dummyimage.com/476x715.png/5fa2dd/ffffff"/>
            <column name="slug" value="ernest_kheminguey"/>
            <column name="name" value="Эрнест Хемингуэй"/>
        </insert>
        <insert tableName="authors">
            <column name="photo" value="https://dummyimage.com/476x715.png/5fa2dd/ffffff"/>
            <column name="slug" value="aleksandr_dyuma"/>
            <column name="name" value="Александр Дюма"/>
        </insert>
        <insert tableName="authors">
            <column name="photo" value="https://dummyimage.com/476x715.png/5fa2dd/ffffff"/>
            <column name="slug" value="frensis_skott_fitsdzherald"/>
            <column name="name" value="Фрэнсис Скотт Фицджеральд"/>
        </insert>
        <insert tableName="authors">
            <column name="photo" value="https://dummyimage.com/476x715.png/5fa2dd/ffffff"/>
            <column name="slug" value="dzheyn_ostin"/>
            <column name="name" value="Джейн Остин"/>
        </insert>
        <insert tableName="authors">
            <column name="photo" value="https://dummyimage.com/476x715.png/5fa2dd/ffffff"/>
            <column name="slug" value="chak_palanik"/>
            <column name="name" value="Чак Паланик"/>
        </insert>
        <insert tableName="authors">
            <column name="photo" value="https://dummyimage.com/476x715.png/5fa2dd/ffffff"/>
            <column name="slug" value="markus_zusak"/>
            <column name="name" value="Маркус Зусак"/>
        </insert>
        <insert tableName="authors">
            <column name="photo" value="https://dummyimage.com/476x715.png/5fa2dd/ffffff"/>
            <column name="slug" value="stiven_king"/>
            <column name="name" value="Стивен Кинг"/>
        </insert>
        <insert tableName="authors">
            <column name="photo" value="https://dummyimage.com/476x715.png/5fa2dd/ffffff"/>
            <column name="slug" value="oldos_khaksli"/>
            <column name="name" value="Олдос Хаксли"/>
        </insert>
        <insert tableName="authors">
            <column name="photo" value="https://dummyimage.com/476x715.png/5fa2dd/ffffff"/>
            <column name="slug" value="mikhail_lermontov"/>
            <column name="name" value="Михаил Лермонтов"/>
        </insert>
        <insert tableName="authors">
            <column name="photo" value="https://dummyimage.com/476x715.png/5fa2dd/ffffff"/>
            <column name="slug" value="endi_veyer"/>
            <column name="name" value="Энди Вейер"/>
        </insert>
        <insert tableName="authors">
            <column name="photo" value="https://dummyimage.com/476x715.png/5fa2dd/ffffff"/>
            <column name="slug" value="margaret_mitchell"/>
            <column name="name" value="Маргарет Митчелл"/>
        </insert>
        <insert tableName="authors">
            <column name="photo" value="https://dummyimage.com/476x715.png/5fa2dd/ffffff"/>
            <column name="slug" value="mariam_petrosyan"/>
            <column name="name" value="Мариам Петросян"/>
        </insert>
        <insert tableName="authors">
            <column name="photo" value="https://dummyimage.com/476x715.png/5fa2dd/ffffff"/>
            <column name="slug" value="arkadiy_strugatskiy"/>
            <column name="name" value="Аркадий Стругацкий"/>
        </insert>
        <insert tableName="authors">
            <column name="photo" value="https://dummyimage.com/476x715.png/5fa2dd/ffffff"/>
            <column name="slug" value="boris_strugatskiy"/>
            <column name="name" value="Борис Стругацкий"/>
        </insert>
        <insert tableName="authors">
            <column name="photo" value="https://dummyimage.com/476x715.png/5fa2dd/ffffff"/>
            <column name="slug" value="paulo_koelo"/>
            <column name="name" value="Пауло Коэльо"/>
        </insert>
        <insert tableName="authors">
            <column name="photo" value="https://dummyimage.com/476x715.png/5fa2dd/ffffff"/>
            <column name="slug" value="dzhordzh_r_r_martin"/>
            <column name="name" value="Джордж Р. Р. Мартин"/>
        </insert>
        <insert tableName="authors">
            <column name="photo" value="https://dummyimage.com/476x715.png/5fa2dd/ffffff"/>
            <column name="slug" value="yanush_vishnevskiy"/>
            <column name="name" value="Януш Вишневский"/>
        </insert>
    </changeSet>
    <changeSet id="52" author="S Timur">
        <insert tableName="genre">
            <column name="slug" value="legkoye_chteniye"/>
            <column name="name" value="Легкое чтение"/>
        </insert>
        <insert tableName="genre">
            <column name="parent_id" value="1"/>
            <column name="slug" value="fantasy"/>
            <column name="name" value="Фантастика"/>
        </insert>
        <insert tableName="genre">
            <column name="parent_id" value="1"/>
            <column name="slug" value="puteshestviye"/>
            <column name="name" value="Путешествие"/>
        </insert>
        <insert tableName="genre">
            <column name="parent_id" value="2"/>
            <column name="slug" value="science_fantasy"/>
            <column name="name" value="Научная Фантастика"/>
        </insert>
        <insert tableName="genre">
            <column name="parent_id" value="1"/>
            <column name="slug" value="boyevki"/>
            <column name="name" value="Боевки"/>
        </insert>
        <insert tableName="genre">
            <column name="parent_id" value="1"/>
            <column name="slug" value="detektivy"/>
            <column name="name" value="Детективы"/>
        </insert>
        <insert tableName="genre">
            <column name="parent_id" value="6"/>
            <column name="slug" value="triller"/>
            <column name="name" value="Триллер"/>
        </insert>
        <insert tableName="genre">
            <column name="parent_id" value="6"/>
            <column name="slug" value="krutoy detektiv"/>
            <column name="name" value="Крутой детектив"/>
        </insert>
        <insert tableName="genre">
            <column name="parent_id" value="6"/>
            <column name="slug" value="ironicheskiy detektiv"/>
            <column name="name" value="Иронический детектив"/>
        </insert>
        <insert tableName="genre">
            <column name="parent_id" value="6"/>
            <column name="slug" value="pro manyakov"/>
            <column name="name" value="Про маньяков"/>
        </insert>
        <insert tableName="genre">
            <column name="parent_id" value="6"/>
            <column name="slug" value="krutoy_detektiv"/>
            <column name="name" value="Шпионский детектив"/>
        </insert>
        <insert tableName="genre">
            <column name="parent_id" value="6"/>
            <column name="slug" value="shpionskiy_detektiv"/>
            <column name="name" value="Криминальный детектив"/>
        </insert>
        <insert tableName="genre">
            <column name="parent_id" value="6"/>
            <column name="slug" value="klassicheskiy_detektiv"/>
            <column name="name" value="Классический детектив"/>
        </insert>
        <insert tableName="genre">
            <column name="parent_id" value="6"/>
            <column name="slug" value="politicheskiy_detektiv"/>
            <column name="name" value="Политический детектив"/>
        </insert>
        <insert tableName="genre">
            <column name="parent_id" value="1"/>
            <column name="slug" value="fentezi"/>
            <column name="name" value="Фэнтези"/>
        </insert>
        <insert tableName="genre">
            <column name="parent_id" value="1"/>
            <column name="slug" value="romance"/>
            <column name="name" value="Роман"/>
        </insert>
        <insert tableName="genre">
            <column name="parent_id" value="16"/>
            <column name="slug" value="love_romance"/>
            <column name="name" value="Любовный роман"/>
        </insert>
        <insert tableName="genre">
            <column name="parent_id" value="16"/>
            <column name="slug" value="philosophical_romance"/>
            <column name="name" value="Философский роман"/>
        </insert>
        <insert tableName="genre">
            <column name="parent_id" value="1"/>
            <column name="slug" value="priklyucheniya"/>
            <column name="name" value="Приключения"/>
        </insert>
        <insert tableName="genre">
            <column name="parent_id" value="1"/>
            <column name="slug" value="uzhasy"/>
            <column name="name" value="Ужасы"/>
        </insert>
        <insert tableName="genre">
            <column name="slug" value="serznoye_chteniye"/>
            <column name="name" value="Серьезное чтение"/>
        </insert>
        <insert tableName="genre">
            <column name="parent_id" value="21"/>
            <column name="slug" value="biografiya"/>
            <column name="name" value="Биография"/>
        </insert>
        <insert tableName="genre">
            <column name="parent_id" value="21"/>
            <column name="slug" value="art_fiction"/>
            <column name="name" value="Художественный вымысел"/>
        </insert>
        <insert tableName="genre">
            <column name="slug" value="dramaturgiya"/>
            <column name="name" value="Драматургия"/>
        </insert>
        <insert tableName="genre">
            <column name="parent_id" value="24"/>
            <column name="slug" value="satire"/>
            <column name="name" value="Сатира"/>
        </insert>
        <insert tableName="genre">
            <column name="parent_id" value="24"/>
            <column name="slug" value="comedy"/>
            <column name="name" value="Комедия"/>
        </insert>
    </changeSet>
    <changeSet id="54" author="S Timur">
        <insert tableName="book2user_type">
            <column name="code" value="KEPT"/>
            <column name="name" value="Отложена"/>
        </insert>
        <insert tableName="book2user_type">
            <column name="code" value="CART"/>
            <column name="name" value="В корзине"/>
        </insert>
        <insert tableName="book2user_type">
            <column name="code" value="PAID"/>
            <column name="name" value="Куплена"/>
        </insert>
        <insert tableName="book2user_type">
            <column name="code" value="ARCHIVED"/>
            <column name="name" value="В архиве"/>
        </insert>
    </changeSet>
    <changeSet id="55" author="S Timur">
        <insert tableName="tags">
            <column name="name" value="современная литература"/>
            <column name="slug" value="sovremennaya_literatura"/>
        </insert>
        <insert tableName="tags">
            <column name="name" value="классическая литература"/>
            <column name="slug" value="klassicheskaya_literatura"/>
        </insert>
        <insert tableName="tags">
            <column name="name" value="зарубежная литературa"/>
            <column name="slug" value="zarubezhnaya_literatura"/>
        </insert>
        <insert tableName="tags">
            <column name="name" value="английская литература"/>
            <column name="slug" value="angliyskaya_literatura"/>
        </insert>
        <insert tableName="tags">
            <column name="name" value="русская литература"/>
            <column name="slug" value="russkaya_literatura"/>
        </insert>
        <insert tableName="tags">
            <column name="name" value="американская литература"/>
            <column name="slug" value="amerikanskaya_literatura"/>
        </insert>
        <insert tableName="tags">
            <column name="name" value="детская литература"/>
            <column name="slug" value="detskaya_literatura"/>
        </insert>
        <insert tableName="tags">
            <column name="name" value="фантастика"/>
            <column name="slug" value="fantastika"/>
        </insert>
        <insert tableName="tags">
            <column name="name" value="детектив"/>
            <column name="slug" value="detektiv"/>
        </insert>
        <insert tableName="tags">
            <column name="name" value="любовь"/>
            <column name="slug" value="lyubov"/>
        </insert>
        <insert tableName="tags">
            <column name="name" value="мистика"/>
            <column name="slug" value="mistika"/>
        </insert>
        <insert tableName="tags">
            <column name="name" value="юмор"/>
            <column name="slug" value="yumor"/>
        </insert>
        <insert tableName="tags">
            <column name="name" value="приключения"/>
            <column name="slug" value="priklyucheniya"/>
        </insert>
        <insert tableName="tags">
            <column name="name" value="сказка"/>
            <column name="slug" value="skazka"/>
        </insert>
        <insert tableName="tags">
            <column name="name" value="французская литература"/>
            <column name="slug" value="frantsuzskaya_literatura"/>
        </insert>
        <insert tableName="tags">
            <column name="name" value="англия"/>
            <column name="slug" value="angliya"/>
        </insert>
        <insert tableName="tags">
            <column name="name" value="художественная литература"/>
            <column name="slug" value="khudozhestvennaya_literatura"/>
        </insert>
        <insert tableName="tags">
            <column name="name" value="психология"/>
            <column name="slug" value="psikhologiya"/>
        </insert>
        <insert tableName="tags">
            <column name="name" value="философия"/>
            <column name="slug" value="filosofiya"/>
        </insert>
        <insert tableName="tags">
            <column name="name" value="экранизировано"/>
            <column name="slug" value="ekranizirovano"/>
        </insert>
        <insert tableName="tags">
            <column name="name" value="любимое"/>
            <column name="slug" value="lyubimoye"/>
        </insert>
        <insert tableName="tags">
            <column name="name" value="антиутопия"/>
            <column name="slug" value="antiutopiya"/>
        </insert>
        <insert tableName="tags">
            <column name="name" value="роман"/>
            <column name="slug" value="roman"/>
        </insert>
        <insert tableName="tags">
            <column name="name" value="франция"/>
            <column name="slug" value="frantsiya"/>
        </insert>
        <insert tableName="tags">
            <column name="name" value="война"/>
            <column name="slug" value="voyna"/>
        </insert>
        <insert tableName="tags">
            <column name="name" value="история"/>
            <column name="slug" value="istoriya"/>
        </insert>
        <insert tableName="tags">
            <column name="name" value="детство"/>
            <column name="slug" value="detstvo"/>
        </insert>
        <insert tableName="tags">
            <column name="name" value="жизнь"/>
            <column name="slug" value="zhizn"/>
        </insert>
        <insert tableName="tags">
            <column name="name" value="драма"/>
            <column name="slug" value="drama"/>
        </insert>
        <insert tableName="tags">
            <column name="name" value="россия"/>
            <column name="slug" value="rossiya"/>
        </insert>
        <insert tableName="tags">
            <column name="name" value="триллер"/>
            <column name="slug" value="triller"/>
        </insert>
        <insert tableName="tags">
            <column name="name" value="америка"/>
            <column name="slug" value="amerika"/>
        </insert>
        <insert tableName="tags">
            <column name="name" value="немецкая литература"/>
            <column name="slug" value="nemetskaya_literatura"/>
        </insert>
    </changeSet>
    <changeSet id="57" author="S Timur">
        <insert tableName="book_file_type">
            <column name="description" value="pdf"/>
            <column name="name" value="pdf"/>
        </insert>
        <insert tableName="book_file_type">
            <column name="description" value="epub"/>
            <column name="name" value="epub"/>
        </insert>
        <insert tableName="book_file_type">
            <column name="description" value="fb2"/>
            <column name="name" value="fb2"/>
        </insert>
    </changeSet>
    <changeSet id="59" author="S Timur">
        <addColumn tableName="user_contact">
            <column name="parent_id" type="int"/>
        </addColumn>
    </changeSet>
    <changeSet id="60" author="S Timur">
        <addForeignKeyConstraint baseTableName="user_contact" baseColumnNames="parent_id"
                                 referencedTableName="user_contact" referencedColumnNames="id"
                                 constraintName="fuebssuojn2i1nk" onDelete="SET NULL"/>
    </changeSet>
    <changeSet id="61" author="S Timur">
        <createSequence sequenceName="hibernate_sequence" startValue="2" incrementBy="1"/>
    </changeSet>
    <changeSet id="62" author="S Timur">
        <insert tableName="users">
            <column name="firstname" value="Сафин"/>
            <column name="lastname" value="Тимур"/>
            <column name="hash" value="stimurstimurstimurs"/>
            <column name="password" value="$2a$10$ZI8MbOn9QVkao.jvFP7LleMJRsUMUjk1KtXKY0mOJ4YI/hDq3jyoy"/>
            <column name="balance" value="5000"/>
        </insert>
        <insert tableName="user_contact">
            <column name="type" value="MAIL"/>
            <column name="user_id" value="1"/>
            <column name="approved" value="1"/>
            <column name="contact" value="stimur1709@mail.ru"/>
            <column name="code" value="111 111"/>
        </insert>
        <insert tableName="user_contact">
            <column name="type" value="PHONE"/>
            <column name="user_id" value="1"/>
            <column name="approved" value="1"/>
            <column name="contact" value="+7 (999) 999-99-99"/>
            <column name="code" value="111 111"/>
        </insert>
        <insert tableName="users">
            <column name="firstname" value="Тарасов"/>
            <column name="lastname" value="Даниил"/>
            <column name="hash" value="stimurstimurstimuab"/>
            <column name="password" value="$2a$10$ZI8MbOn9QVkao.jvFP7LleMJRsUMUjk1KtXKY0mOJ4YI/hDq3jyoy"/>
            <column name="balance" value="5000"/>
        </insert>
        <insert tableName="user_contact">
            <column name="type" value="MAIL"/>
            <column name="user_id" value="2"/>
            <column name="approved" value="1"/>
            <column name="contact" value="stimurstimurstimuab@mail.ru"/>
            <column name="code" value="111 111"/>
        </insert>
        <insert tableName="user_contact">
            <column name="type" value="PHONE"/>
            <column name="user_id" value="2"/>
            <column name="approved" value="1"/>
            <column name="contact" value="+7 (999) 999-99-91"/>
            <column name="code" value="111 111"/>
        </insert>
        <insert tableName="users">
            <column name="firstname" value="Китюха"/>
            <column name="lastname" value="Никита"/>
            <column name="hash" value="stimurstimurstimqws"/>
            <column name="password" value="$2a$10$ZI8MbOn9QVkao.jvFP7LleMJRsUMUjk1KtXKY0mOJ4YI/hDq3jyoy"/>
            <column name="balance" value="5000"/>
        </insert>
        <insert tableName="user_contact">
            <column name="type" value="MAIL"/>
            <column name="user_id" value="3"/>
            <column name="approved" value="1"/>
            <column name="contact" value="stimurstimurstimqws@mail.ru"/>
            <column name="code" value="111 111"/>
        </insert>
        <insert tableName="user_contact">
            <column name="type" value="PHONE"/>
            <column name="user_id" value="3"/>
            <column name="approved" value="1"/>
            <column name="contact" value="+7 (999) 999-99-92"/>
            <column name="code" value="111 111"/>
        </insert>
        <insert tableName="users">
            <column name="firstname" value="Сафин"/>
            <column name="lastname" value="Тимур"/>
            <column name="hash" value="stgfurstimurstimurs"/>
            <column name="password" value="$2a$10$ZI8MbOn9QVkao.jvFP7LleMJRsUMUjk1KtXKY0mOJ4YI/hDq3jyoy"/>
            <column name="balance" value="5000"/>
        </insert>
        <insert tableName="user_contact">
            <column name="type" value="MAIL"/>
            <column name="user_id" value="4"/>
            <column name="approved" value="1"/>
            <column name="contact" value="stgfurstimurstimurs@mail.ru"/>
            <column name="code" value="111 111"/>
        </insert>
        <insert tableName="user_contact">
            <column name="type" value="PHONE"/>
            <column name="user_id" value="4"/>
            <column name="approved" value="1"/>
            <column name="contact" value="+7 (231) 999-99-99"/>
            <column name="code" value="111 111"/>
        </insert>
        <insert tableName="users">
            <column name="firstname" value="Сафин"/>
            <column name="lastname" value="Тимур"/>
            <column name="hash" value="stimucdsimurstimurs"/>
            <column name="password" value="$2a$10$ZI8MbOn9QVkao.jvFP7LleMJRsUMUjk1KtXKY0mOJ4YI/hDq3jyoy"/>
            <column name="balance" value="5000"/>
        </insert>
        <insert tableName="user_contact">
            <column name="type" value="MAIL"/>
            <column name="user_id" value="5"/>
            <column name="approved" value="1"/>
            <column name="contact" value="stimucdsimurstimurs@mail.ru"/>
            <column name="code" value="111 111"/>
        </insert>
        <insert tableName="user_contact">
            <column name="type" value="PHONE"/>
            <column name="user_id" value="5"/>
            <column name="approved" value="1"/>
            <column name="contact" value="+7 (532) 999-99-99"/>
            <column name="code" value="111 111"/>
        </insert>
        <insert tableName="users">
            <column name="firstname" value="Сафин"/>
            <column name="lastname" value="Тимур"/>
            <column name="hash" value="stimurstimewstimurs"/>
            <column name="password" value="$2a$10$ZI8MbOn9QVkao.jvFP7LleMJRsUMUjk1KtXKY0mOJ4YI/hDq3jyoy"/>
            <column name="balance" value="5000"/>
        </insert>
        <insert tableName="user_contact">
            <column name="type" value="MAIL"/>
            <column name="user_id" value="6"/>
            <column name="approved" value="1"/>
            <column name="contact" value="stimurstimewstimurs@mail.ru"/>
            <column name="code" value="111 111"/>
        </insert>
        <insert tableName="user_contact">
            <column name="type" value="PHONE"/>
            <column name="user_id" value="6"/>
            <column name="approved" value="1"/>
            <column name="contact" value="+7 (547) 999-99-99"/>
            <column name="code" value="111 111"/>
        </insert>
        <insert tableName="users">
            <column name="firstname" value="Сафин"/>
            <column name="lastname" value="Тимур"/>
            <column name="hash" value="stimurfdasurstimurs"/>
            <column name="password" value="$2a$10$ZI8MbOn9QVkao.jvFP7LleMJRsUMUjk1KtXKY0mOJ4YI/hDq3jyoy"/>
            <column name="balance" value="5000"/>
        </insert>
        <insert tableName="user_contact">
            <column name="type" value="MAIL"/>
            <column name="user_id" value="7"/>
            <column name="approved" value="1"/>
            <column name="contact" value="stimurfdasurstimurs@mail.ru"/>
            <column name="code" value="111 111"/>
        </insert>
        <insert tableName="user_contact">
            <column name="type" value="PHONE"/>
            <column name="user_id" value="7"/>
            <column name="approved" value="1"/>
            <column name="contact" value="+7 (999) 321-21-99"/>
            <column name="code" value="111 111"/>
        </insert>
    </changeSet>
    <changeSet id="63" author="S Timur">
        <createTable tableName="user_login_history">
            <column autoIncrement="true" name="id" type="serial">
                <constraints primaryKey="true" primaryKeyName="user_login_history_pkey"/>
            </column>
            <column name="system" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
            <column name="date" type="timestamp(0)" defaultValueDate="now()">
                <constraints nullable="false"/>
            </column>
            <column name="ip_address" type="varchar(40)">
                <constraints nullable="false"/>
            </column>
            <column name="user_id" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="country" type="varchar(50)"/>
            <column name="city" type="varchar(50)"/>
        </createTable>
    </changeSet>
    <changeSet id="64" author="S Timur">
        <addForeignKeyConstraint baseTableName="user_login_history" baseColumnNames="user_id"
                                 constraintName="fkkdc421k421rnfsaygg2f0v9588wi"
                                 referencedTableName="users" referencedColumnNames="id" onDelete="NO ACTION"
                                 onUpdate="NO ACTION" deferrable="false" initiallyDeferred="false"/>
    </changeSet>
    <changeSet id="65" author="S Timur">
        <insert tableName="book2user_type">
            <column name="code" value="UNLINK"/>
            <column name="name" value="Удалена"/>
        </insert>
    </changeSet>
    <changeSet id="66" author="S Timur">
        <createTable tableName="email">
            <column name="id" autoIncrement="true" type="serial">
                <constraints primaryKey="true" primaryKeyName="email_pkey"/>
            </column>
            <column name="username" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
            <column name="password" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
            <column name="host" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
            <column name="port" type="smallint">
                <constraints nullable="false"/>
            </column>
            <column name="protocol" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
            <column name="is_main" type="boolean" defaultValueBoolean="false">
                <constraints nullable="false"/>
            </column>
            <column name="smmtp_auth" type="boolean" defaultValueBoolean="true">
                <constraints nullable="false"/>
            </column>
            <column name="smmtp_startttls_enable" type="boolean" defaultValueBoolean="false">
                <constraints nullable="false"/>
            </column>
            <column name="smmtp_ssl_enable" type="boolean" defaultValueBoolean="false">
                <constraints nullable="false"/>
            </column>
            <column name="debug" type="boolean" defaultValueBoolean="false">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="67" author="S Timur">
        <insert tableName="email">
            <column name="password" value="Qsg1wdZN7abcPxdDqtEB"/>
            <column name="username" value="bookstore.sbj@mail.ru"/>
            <column name="host" value="smtp.mail.ru"/>
            <column name="port" value="465"/>
            <column name="protocol" value="smtps"/>
            <column name="is_main" value="1"/>
        </insert>
    </changeSet>
    <changeSet id="68" author="S Timur">
        <createTable tableName="api">
            <column name="id" autoIncrement="true" type="serial">
                <constraints primaryKey="true" primaryKeyName="api_pkey"/>
            </column>
            <column name="name" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
            <column name="url" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
            <column name="username" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
            <column name="api_key" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
            <column name="comment" type="varchar(255)"/>
            <column name="url_documentation" type="varchar(255)">
                <constraints nullable="false"/>
            </column>
            <column name="property" type="varchar(20)">
                <constraints nullable="false"/>
            </column>
            <column name="is_main" type="boolean" defaultValueBoolean="false">
                <constraints nullable="false"/>
            </column>
            <column name="return_url" type="varchar(255)"/>
        </createTable>
    </changeSet>
    <changeSet id="69" author="S Timur">
        <insert tableName="api">
            <column name="name" value="Ю Касса"/>
            <column name="url" value="https://api.yookassa.ru/v3/payments"/>
            <column name="username" value="981497"/>
            <column name="api_key" value="test_PG3qXOzcbDsNGEl4kKm8VuYRKj-J__6zXYiTWeSqx7k"/>
            <column name="comment" value="Сервис для приёма платежей в интернете"/>
            <column name="url_documentation" value="https://yookassa.ru/developers"/>
            <column name="property" value="PAYMENT"/>
            <column name="is_main" value="true"/>
            <column name="return_url" value="http://localhost:8085/my?uuid="/>
        </insert>
    </changeSet>
    <changeSet id="70" author="S Timur">
        <createTable tableName="status_payment">
            <column name="id" autoIncrement="true" type="serial">
                <constraints primaryKey="true" primaryKeyName="status_payment_pkey"/>
            </column>
            <column name="status_ru" type="varchar(20)">
                <constraints nullable="false"/>
            </column>
            <column name="status_en" type="varchar(20)">
                <constraints nullable="false"/>
            </column>
            <column name="comment" type="varchar(255)"/>
        </createTable>
    </changeSet>
    <changeSet id="71" author="S Timur">
        <insert tableName="status_payment">
            <column name="status_ru" value="В ожидании"/>
            <column name="status_en" value="Pending"/>
            <column name="comment" value="Платеж создан и ожидает действий от пользователя"/>
        </insert>
        <insert tableName="status_payment">
            <column name="status_ru" value="В ожидании захвата"/>
            <column name="status_en" value="Waiting for capture"/>
            <column name="comment" value="Платеж оплачен, деньги авторизованы и ожидают списания."/>
        </insert>
        <insert tableName="status_payment">
            <column name="status_ru" value="Успешно"/>
            <column name="status_en" value="Succeeded"/>
            <column name="comment"
                    value="Пплатеж успешно завершен, деньги будут перечислены на ваш расчетный счет в соответствии с вашим договором с ЮKassa"/>
        </insert>
        <insert tableName="status_payment">
            <column name="status_ru" value="Отменен"/>
            <column name="status_en" value="Сanceled"/>
            <column name="comment"
                    value="Платеж отменен. Вы увидите этот статус, если вы отменили платеж самостоятельно, истекло время на принятие платежа или платеж был отклонен ЮKassa или платежным провайдером."/>
        </insert>
    </changeSet>
    <changeSet id="72" author="S Timur">
        <addColumn tableName="balance_transaction">
            <column name="code_payment_in" type="uuid"/>
            <column name="code_payment_ex" type="uuid"/>
            <column name="status_payment_id" type="int" defaultValue="1"/>
        </addColumn>
    </changeSet>
    <changeSet id="73" author="S Timur">
        <addForeignKeyConstraint baseTableName="balance_transaction" baseColumnNames="status_payment_id"
                                 constraintName="fkkdc421k421aersaygg2f0v9588wi"
                                 referencedTableName="status_payment" referencedColumnNames="id" onDelete="NO ACTION"
                                 onUpdate="CASCADE" deferrable="false" initiallyDeferred="false"/>
    </changeSet>
    <changeSet id="74" author="S Timur">
        <sqlFile path="db/changelog/scripts/trigger-balance-transaction-up.sql"/>
    </changeSet>
    <changeSet id="75" author="S Timur">
        <sqlFile path="db/changelog/scripts/trigger-book2user.sql"/>
    </changeSet>
    <changeSet author="S Timur" id="76">
        <addPrimaryKey columnNames="book_id, user_id" constraintName="book_rating_pkey" tableName="book_rating"/>
    </changeSet>
    <changeSet id="77" author="S Timur">
        <addForeignKeyConstraint baseColumnNames="user_id" baseTableName="book_rating"
                                 constraintName="fk1i8i82uf4ebv1wepiujenmj7x" deferrable="false"
                                 initiallyDeferred="false" onDelete="CASCADE" onUpdate="NO ACTION"
                                 referencedColumnNames="id" referencedTableName="users"/>
    </changeSet>
    <changeSet id="78" author="S Timur">
        <addForeignKeyConstraint baseColumnNames="book_id" baseTableName="book_rating"
                                 constraintName="fk1i4g52uf4ebv1wepiujenmj7x" deferrable="false"
                                 initiallyDeferred="false" onDelete="CASCADE" onUpdate="NO ACTION"
                                 referencedColumnNames="id" referencedTableName="books"/>
    </changeSet>
    <changeSet id="79" author="S Timur">
        <sqlFile path="db/changelog/scripts/function-get-books.sql"/>
    </changeSet>
    <changeSet id="80" author="S Timur">
        <sqlFile path="db/changelog/scripts/trigger-balance-transaction-in.sql"/>
    </changeSet>
    <changeSet id="81" author="S Timur">
        <sqlFile path="db/changelog/scripts/function-get-reviews.sql"/>
    </changeSet>
    <changeSet id="82" author="S Timur">
        <createTable tableName="books_viewed">
            <column name="book_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="user_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="time" type="timestamp(0)" defaultValueDate="now()">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="83" author="S Timur">
        <addPrimaryKey columnNames="book_id, user_id" constraintName="books_viewed_pkey" tableName="books_viewed"/>
    </changeSet>
    <changeSet id="84" author="S Timur">
        <sqlFile path="db/changelog/scripts/function-get-books-viewed.sql"/>
    </changeSet>
    <changeSet id="85" author="S Timur">
        <sqlFile path="db/changelog/scripts/insert-document.sql"/>
    </changeSet>
    <changeSet id="86" author="S Timur">
        <sqlFile path="db/changelog/scripts/function-get-recommended-books.sql"/>
    </changeSet>
    <changeSet id="87" author="S Timur">
        <sqlFile path="db/changelog/scripts/function-find-books.sql"/>
    </changeSet>
    <changeSet id="88" author="S Timur">
        <sqlFile path="db/changelog/scripts/trigger-message.sql"/>
    </changeSet>
    <changeSet id="89" author="S Timur">
        <sqlFile path="db/changelog/scripts/trigger-review.sql"/>
    </changeSet>
    <changeSet id="90" author="S Timur">
        <createTable tableName="image">
            <column autoIncrement="true" name="id" type="SERIAL">
                <constraints primaryKey="true" primaryKeyName="image_pkey"/>
            </column>
            <column name="name" type="varchar(57)"/>
            <column name="size" type="bigint"/>
        </createTable>
    </changeSet>
    <changeSet id="91" author="S Timur">
        <insert tableName="image">
            <column name="name" value="518c2ec0-5673-4379-805d-2104fcbb67e5.png"/>
            <column name="size" value="1477"/>
        </insert>
    </changeSet>
    <changeSet id="92" author="S Timur">
        <renameColumn tableName="books" oldColumnName="image" newColumnName="image_id"/>
        <renameColumn tableName="authors" oldColumnName="photo" newColumnName="image_id"/>
    </changeSet>
    <changeSet id="93" author="S Timur">
        <update tableName="books">
            <column name="image_id" value="1"/>
            <where>image_id is not null</where>
        </update>
    </changeSet>
    <changeSet id="94" author="S Timur">
        <update tableName="authors">
            <column name="image_id" value="1"/>
            <where>image_id is not null</where>
        </update>
    </changeSet>
    <changeSet id="95" author="S Timur">
        <modifyDataType tableName="books" columnName="image_id" newDataType="int"/>
    </changeSet>
    <changeSet id="96" author="S Timur">
        <modifyDataType tableName="authors" columnName="image_id" newDataType="int"/>
    </changeSet>
    <changeSet id="97" author="S Timur">
        <addForeignKeyConstraint baseTableName="books" baseColumnNames="image_id" constraintName="fkigqitem4r46mag0sl4csnwp72"
                                 referencedTableName="image" referencedColumnNames="id" onDelete="SET NULL" deferrable="false"/>
    </changeSet>
    <changeSet id="98" author="S Timur">
        <addForeignKeyConstraint baseTableName="authors" baseColumnNames="image_id" constraintName="fkigqauth4r46mag0sl4csnwp72"
                                 referencedColumnNames="id" referencedTableName="image" onDelete="SET NULL" deferrable="false"/>
    </changeSet>
    <changeSet id="1683121123775-1" author="S Timur">
        <comment>creating table user_role</comment>
        <createTable tableName="user_role">
            <column autoIncrement="true" name="id" type="serial">
                <constraints primaryKey="true" primaryKeyName="user_role_pkey"/>
            </column>
            <column name="role" type="varchar(30)">
                <constraints nullable="false" unique="true"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="1312121123775-1" author="S Timur">
        <comment>creating table user2role</comment>
        <createTable tableName="user2role">
            <column name="user_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="role_id" type="int">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="1683121198775-1" author="S Timur">
        <comment>creating a primary key 'user2role_pkey' for a table user2role</comment>
        <addPrimaryKey tableName="user2role" columnNames="user_id, role_id" constraintName="user2role_pkey"/>
    </changeSet>
    <changeSet id="1612221123775-1" author="S Timur">
        <comment>creating a foreign key 'u2r_user_id_fk' for a table user2role</comment>
        <addForeignKeyConstraint baseTableName="user2role" baseColumnNames="user_id"
                                 constraintName="u2r_user_id_fk" referencedTableName="users"
                                 referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="1683121123123-1" author="S Timur">
        <comment>creating a foreign key 'u2r_role_id_fk' for a table user2role</comment>
        <addForeignKeyConstraint baseTableName="user2role" baseColumnNames="role_id"
                                 constraintName="u2r_role_id_fk" referencedTableName="user_role"
                                 referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="1683121123987-1" author="S Timur">
        <comment>insert data for a table user_role</comment>
        <insert tableName="user_role">
            <column name="role" value="ROLE_USER"/>
        </insert>
        <insert tableName="user_role">
            <column name="role" value="ROLE_ADMIN"/>
        </insert>
    </changeSet>
    <changeSet id="1683121123988-1" author="S Timur">
        <comment>insert data for a table user2role</comment>
        <sqlFile path="db/changelog/scripts/insert-user2role.sql"/>
    </changeSet>
    <changeSet id="131295121235-1" author="S Timur">
        <comment>creating table task_manager</comment>
        <createTable tableName="task_manager">
            <column autoIncrement="true" name="id" type="serial">
                <constraints primaryKey="true" primaryKeyName="tm_pkey"/>
            </column>
            <column name="name_task" type="varchar(50)">
                <constraints nullable="false"/>
            </column>
            <column name="description" type="varchar(250)"/>
            <column name="active" type="boolean" defaultValueBoolean="false">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="131221121235-1" author="S Timur">
        <comment>insert data for a table task_manager</comment>
        <insert tableName="task_manager">
            <column name="name_task" value="litres"/>
            <column name="description" value="parsing books with litres"/>
            <column name="active" value="true"/>
        </insert>
    </changeSet>
    <changeSet id="134621121235-1" author="S Timur">
        <comment>creating table tm_litres</comment>
        <createTable tableName="tm_litres">
            <column autoIncrement="true" name="id" type="SERIAL">
                <constraints primaryKey="true" primaryKeyName="tm_litres_pkey"/>
            </column>
            <column name="task_id" type="int"/>
            <column name="genre_id" type="int"/>
            <column name="author_id" type="int"/>
            <column name="tag_id" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="last_start" type="int">
                <constraints nullable="false"/>
            </column>
            <column name="last_time" type="TIMESTAMP(0)"/>
            <column name="total" type="int">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="3583121121235-1" author="S Timur">
        <comment>creating a unique constraint for a table tm_litres</comment>
        <addUniqueConstraint tableName="tm_litres" columnNames="task_id, genre_id"/>
    </changeSet>
    <changeSet id="3123121121235-1" author="S Timur">
        <comment>creating a unique constraint for a table tm_litres</comment>
        <addUniqueConstraint tableName="tm_litres" columnNames="task_id, author_id"/>
    </changeSet>
    <changeSet id="3543121121235-1" author="S Timur">
        <comment>creating a unique constraint for a table tm_litres</comment>
        <addUniqueConstraint tableName="tm_litres" columnNames="task_id, tag_id"/>
    </changeSet>
    <changeSet id="1856221123775-1" author="S Timur">
        <comment>creating a foreign key 'tml_task_id_fk' for a table tm_litres</comment>
        <addForeignKeyConstraint baseTableName="tm_litres" baseColumnNames="task_id"
                                 constraintName="tml_task_id_fk" referencedTableName="task_manager"
                                 referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="1743121123123-1" author="S Timur">
        <comment>creating a foreign key 'tml_tag_id_fk' for a table tm_litres</comment>
        <addForeignKeyConstraint baseTableName="tm_litres" baseColumnNames="tag_id"
                                 constraintName="tml_tag_id_fk" referencedTableName="tags"
                                 referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="1742151123123-1" author="S Timur">
        <comment>creating a foreign key 'tml_tag_id_fk' for a table tm_litres</comment>
        <addForeignKeyConstraint baseTableName="tm_litres" baseColumnNames="author_id"
                                 constraintName="tml_author_id_fk" referencedTableName="authors"
                                 referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="1743127863123-1" author="S Timur">
        <comment>creating a foreign key 'tml_genre_id_fk' for a table tm_litres</comment>
        <addForeignKeyConstraint baseTableName="tm_litres" baseColumnNames="genre_id"
                                 constraintName="tml_genre_id_fk" referencedTableName="genre"
                                 referencedColumnNames="id"/>
    </changeSet>
    <changeSet id="1249121121235-1" author="S Timur">
        <comment>created a trigger to update and insert in the table of tm_litres</comment>
        <sqlFile path="db/changelog/scripts/trigger-tm-litres-in.sql"/>
    </changeSet>
</databaseChangeLog>
